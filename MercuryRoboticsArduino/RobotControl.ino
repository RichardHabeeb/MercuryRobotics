/**************************************************************************************************
* Kansas State University Robotic Competition Team
* File: RobotControl.ino
*
* Description: 
*
* Created: 3/9/2015, by Richard Habeeb
***************************************************************************************************/

 
/*-------------------------------------------------------------------------------------------------
*                                            Includes
*------------------------------------------------------------------------------------------------*/
#include "RobotControl.h"

/*-------------------------------------------------------------------------------------------------
*                                           Prototypes
*------------------------------------------------------------------------------------------------*/

/*-------------------------------------------------------------------------------------------------
*                                           Variables
*------------------------------------------------------------------------------------------------*/

/*-------------------------------------------------------------------------------------------------
*                                            Functions
*------------------------------------------------------------------------------------------------*/

/*-------------------------------------------------------------------------------------------------
*                                            Methods
*------------------------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------------
* Function: RobotControl
*
* Description: 
*------------------------------------------------------------------------------------*/
RobotControl::RobotControl()
{
	openPos = 180;
	closedPos = 0;
	iris.attach(2);
	aperature.attach(3);
	aperatureCurrPos = aperature.read();
	irisCurrPos = iris.read();

    comm = new Communication();
}

/*-----------------------------------------------------------------------------------
* Function: runRobot
*
* Description: 
*------------------------------------------------------------------------------------*/
RobotControl::~RobotControl()
{
}


/*-----------------------------------------------------------------------------------
* Function: runRobot
*
* Description: 
*------------------------------------------------------------------------------------*/
void RobotControl::runRobot()
{
	//TODO
	while (1);
}

/*-----------------------------------------------------------------------------------
* Function: toggleAperature
*
* Description: 
*------------------------------------------------------------------------------------*/
void RobotControl::toggleAperature()
{
	aperatureCurrPos = aperature.read();
	if (aperatureCurrPos == openPos)
	{
		aperature.write(closedPos);
	}
	else if (aperatureCurrPos == closedPos)
	{
		aperature.write(openPos);
	}
}

/*-----------------------------------------------------------------------------------
* Function: toggleIris
*
* Description: 
*------------------------------------------------------------------------------------*/
void RobotControl::toggleIris()
{
	irisCurrPos = iris.read();
	if (irisCurrPos == openPos)
	{
		iris.write(closedPos);
	}
	else if (irisCurrPos == closedPos)
	{
		iris.write(openPos);
	}
}

